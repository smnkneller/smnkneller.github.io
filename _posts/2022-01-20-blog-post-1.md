---
title: 'IoT platform switching: From Conrad Connect to iobroker'
date: 2022-01-20
permalink: /posts/2022/01/blog-post-1/
tags:
  - IoT
  - iobroker
  - smart Home
  - homematic IP
---

In our research project [Smart Air](https://www.esentri.com/smart-air-intelligente-system-behaglichkeit-haus/) we were forced to get rid of [Conrad Connect IoT platform](https://conradconnect.com/de). Why? To our annoyance they just shot it down - and announced the shut down just one month in advance! In this post I'll describe what had to be done to migrate to the open source [IoT platform iobroker](https://www.iobroker.net/) and why I'm actually happy about this forced IoT platform switching.

Our Starting Point
======
Within the research project [Smart Air](https://www.esentri.com/smart-air-intelligente-system-behaglichkeit-haus/) we are trying to develop an AI based control of a ventilation system with integrated dehumidification for residential houses. Therefore we collected and are still collecting data of a reference house with a standard ventilation system. This data is measured by serveral sensors from [Homematic IP](https://homematic-ip.com/de) placed in each room of the reference house as well as outside the house. As Homematic IP was partnering with Conrad Connect we did not really question which IoT platform would be the right one for our needs and just accepted the costs for Conrad Connect (round about 1000€ per year for our project size). We built the following infrastucture:


![Architecture Conrad Connect](/images/post1_architecture_old.png)

As you can see all the data from the different sensors within the reference house is consolidated via the Homematic IP access point. From there it is sent over the internet to two Clouds: Homematic Cloud and Conrad Connect. With the Homematic Cloud the homematic Application is fed with real time data, so you can check the sensor values with your smartphone from whereever you are. But thats just for the real time data and you don't get your data outside the application! So we were looking for a way to store the data into a database and Homematic support led as to their partner Conrad Connect. Within Conrad Connect we found a way to do an API Call to our AWS API Gateway on every sensor change. This was not very convenient as for every sensor you have to do some drag & drop within Conrad Connects UI as well as add your put call. So no looping over the sensors and no versioning of the code which is quite a disadvantage but however it worked and we got our data to our familiar AWS world where we could store, process and visualize it as well as develop our AI based control of the ventilation system.

If you want to save the data to a database you

Migration steps towards iobroker
======

Step1
------

Step2
------

Advantages of iobroker over Conrad Connect
======
- open source community verison of iobroker. So we save round about 1000€ a year
- code versioning of the javascript code that does the put calls
- full control of the data and when to send it (just changes of the value and not additional timely trigger)
- full control of all data, not just the sensor values Conrad Connect has an implemented maker for
- 
